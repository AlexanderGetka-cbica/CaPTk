CMAKE_MINIMUM_REQUIRED(VERSION 3.0)

SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${PROJECT_SOURCE_DIR}/../../../cmake_modules/)
INCLUDE( CaPTk_macros )

SET( PROJECT_NAME GeodesicTrainingCaPTk )

CAPTK_ADD_PROJECT( ${PROJECT_NAME} 1.0 )

set(CMAKE_INCLUDE_CURRENT_DIR ON)
set(CMAKE_AUTOMOC ON)

# For C++11
SET(CMAKE_CXX_STANDARD 11)
SET(CMAKE_CXX_STANDARD_REQUIRED YES) 

# Library dependencies

# For ITK
FIND_PACKAGE( ITK REQUIRED )
SET( ITK_NO_IO_FACTORY_REGISTER_MANAGER "OFF" )
INCLUDE( ${ITK_USE_FILE} )

# For OpenCV
FIND_PACKAGE( OpenCV REQUIRED )
#INCLUDE_DIRECTORIES( ${OpenCV_INCLUDE_DIRS} )

# For Qt
find_package(Qt5 COMPONENTS Core Widgets REQUIRED)

# For OpenMP
FIND_PACKAGE(OpenMP REQUIRED)
SET( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${OpenMP_C_FLAGS}" )
SET( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}" )

# Source dependencies
FILE( GLOB_RECURSE CBICA_TOOLKIT_HEADERS
  "${CMAKE_SOURCE_DIR}/src/cbica_toolkit/src/*.h"
)
FILE( GLOB_RECURSE CBICA_TOOLKIT_SOURCES
  "${CMAKE_SOURCE_DIR}/src/cbica_toolkit/src/*cpp"
)
FILE( GLOB_RECURSE YAML_HEADERS
  "${CMAKE_SOURCE_DIR}/src/thirdparty/thirdparty/yaml-cpp/include/yaml-cpp/*.*"
)
FILE( GLOB_RECURSE YAML_SOURCES
  "${CMAKE_SOURCE_DIR}/src/thirdparty/thirdparty/yaml-cpp/src/*.*"
)

# Setting the files

FILE( GLOB_RECURSE GEODESIC_TRAINING_HEADERS
  include/*.h
  CACHE INTERNAL ""
)

FILE( GLOB_RECURSE GEODESIC_TRAINING_SOURCES
  include/*.cpp
  CACHE INTERNAL ""
)

FILE( GLOB_RECURSE GEODESIC_TRAINING_CAPTK_HEADERS
  include/*.h
  GeodesicTrainingCaPTkApp.h
  CACHE INTERNAL ""
)

FILE( GLOB_RECURSE GEODESIC_TRAINING_CAPTK_SOURCES
  include/*.cpp
  GeodesicTrainingCaPTkApp.cpp
  CACHE INTERNAL ""
)

SET( GEODESIC_TRAINING_INCLUDE_DIRS 
  ${CMAKE_SOURCE_DIR}/src/applications/GeodesicTraining
  ${CMAKE_SOURCE_DIR}/src/applications/GeodesicTraining/include
  ${CMAKE_SOURCE_DIR}/src/thirdparty/thirdparty/yaml-cpp/include/yaml-cpp
  ${CMAKE_SOURCE_DIR}/src/cbica_toolkit/src
  CACHE INTERNAL ""
)

SET( GEODESIC_TRAINING_EXE_FILES
  GeodesicTraining.cxx
  "${GEODESIC_TRAINING_HEADERS}"
  "${GEODESIC_TRAINING_SOURCES}"
  "${YAML_HEADERS}"
  "${YAML_SOURCES}"
  "${CBICA_TOOLKIT_HEADERS}"
  "${CBICA_TOOLKIT_SOURCES}"
)

SET( GEODESIC_TRAINING_EXE_LIBS
  ${ITK_LIBRARIES}
  ${OpenCV_LIBRARIES}
  ${LIBNAME_CBICATK}
)

# Add sources to executable
CAPTK_ADD_EXECUTABLE( GeodesicTraining
  ${GEODESIC_TRAINING_EXE_FILES}
  GEODESIC_TRAINING_EXE_LIBS
)