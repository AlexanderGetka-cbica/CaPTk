/**

\page How_To_Guides How To Guides

This section provides step-by-step guidance to apply the CaPTk functionalities:

- \subpage ht_Preprocessing "Pre-processing"
- \subpage ht_Segmentation "Segmentation"
- \subpage ht_FeatureExtraction "Feature Extraction"
- \subpage ht_SpecialApps "Specialized Applications Usage"

--------
*/










/**
\page ht_Preprocessing Pre-processing
Contains the following applications: 

- \subpage preprocessing_dcm2nii "DICOM to NIfTI conversion"
- \subpage preprocessing_susan "Denoise-SUSAN (ITK filter)"
- \subpage preprocessing_biasN4 "N4 Bias Correction (ITK filter)"
- \subpage preprocessing_histoMatch "Histogram Matching"
- \subpage preprocessing_bet "Skull Stripping"

--------
*/

/**  
\page preprocessing_dcm2nii DICOM to NIfTI conversion
This tool converts a DICOM series into the Neuroimaging
Informatics Technology Initiative (NIfTI) file format.

<b>REQUIREMENTS:</b>
	-# A folder with the continuous sequence of a DICOM series.
	
<b>USAGE:</b>
	-# Launch the tool using the 'Preprocessing' -> 'DICOM to NIfTI' menu option.
	-# Specify the first DICOM image in series, and the output filename.
	-# Click on "Confirm".

--------
*/

/**  
\page preprocessing_susan Denoise-SUSAN (ITK filter)
This tool smooths an image already loaded in CaPTk, to remove any high frequency intensity variations (i.e., noise), using the SUSAN algorithm [1].

<b>REQUIREMENTS:</b>
	-# An image loaded in CaPTk.
	
<b>USAGE:</b>
	-# Load an image in CaPTk.
	-# Launch the tool using the 'Preprocessing' -> 'Denoise-SUSAN' menu option.
	-# Specify the output filename.
	-# Click on 'Save'.
	-# The output image is saved in the specified folder and automatically loaded in CaPTk.
  
--------

References

-# S.M.Smith, J.M.Brady. "SUSAN-A new approach to low level image processing", International Journal of Computer Vision. 23(1):45-78, 1997.

--------
*/

/**  
\page preprocessing_biasN4 N4 Bias Correction (ITK filter)
This tool corrects an image, already loaded in CaPTk, for magnetic field inhomogeneities using a non-parametric method [1].

<b>REQUIREMENTS:</b>
	-# An image loaded in CaPTk.
	
<b>USAGE:</b>
	-# Load an image in CaPTk.
	-# Launch the tool using the 'Preprocessing' -> 'BiasCorrect-N4' menu option.
	-# Specify the output filename.
	-# Click on 'Save'.
	-# The output image is saved in the specified folder and automatically loaded in CaPTk.

--------

References

-# J.G.Sled, A.P.Zijdenbos, A.C.Evans. "A nonparametric method for automatic correction of intensity nonuniformity in MRI data" IEEE Trans Med Imaging. 17(1):87-97, 1998.

--------
*/

/**  
\page preprocessing_histoMatch Histogram Matching
This tool normalizes the intensity profile of an input image based on the intensity profile of a reference image.

<b>REQUIREMENTS:</b>
	-# A reference and an input image.
	
<b>USAGE:</b>
	-# Launch the tool using the 'Preprocessing' -> 'HistogramMatching' menu option.
	-# Specify the Reference and Input images, and the output filename.
	-# Click on 'Confirm'.
	-# The output image is saved in the specified folder.

--------
*/

/**  
\page preprocessing_bet Skull Stripping
This tool extracts the brain from a brain MRI scan, based on an ITK filter.

<b>REQUIREMENTS:</b>
	-# An input image.
	
<b>USAGE:</b>
	-# Launch the tool using the 'Preprocessing' -> 'Skull Stripping' menu option.
	-# Specify the a reference atlas and its corresponding reference brain mask. Note that these fields are pre-populated by default using the SRI-24 atlas [1].
	-# Specify the input image for brain extraction and the output filename.
	-# Click on 'Confirm'.
	-# The output image is saved in the specified folder.

--------

References

-# T.Rohlfing, N.M.Zahr, E.V.Sullivan, A.Pfefferbaum, "The SRI24 multichannel atlas of normal adult human brain structure", Human Brain Mapping, 31(5):798-819, 2010. DOI:10.1002/hbm.20906

--------
*/













/**
\page ht_Segmentation Segmentation

## Geodesic Distance Transform-based Segmentation
The geodesic distance transform based segmentation is a semi-automatic technique to delineate structures of distinct intensity.

<b> REQUIREMENTS:</b>
A single image with distinct boundaries for the structure that needs to be segmented [1].

<b> USAGE:</b>
	-# Load in CaPTk the image that you want to segment.
	-# Using Label 1 from the drawing tab, annotate a region of the tissue you would like to segment in the image.
	-# Launch the application using the 'Applications' -> 'Geodesic Segmentation' menu option.
	-# The mask is populated within ~5 minutes, showing the progress at the bottom right corner of CaPTk.
	-# The mask is visualized automatically in the visualization panels.
	-# You can revise the resulted segmentation mask (Label:1), by selecting the "Geodesic" preset and changing the "Threshold" at the bottom right corner of CaPTk.
	- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, and can run in the following format:
	\verbatim
	GeodesicSegmentation.exe -i C:/inputImage.nii.gz -m C:/maskWithOneLabel.nii.gz -o C:/outputImage.nii.gz -t 20
	\endverbatim

--------

## ITK-SNAP
ITK-SNAP is a stand-alone software application used to segment structures in 3D medical images and other utilities [2] - http://www.itksnap.org/pmwiki/pmwiki.php.

Within CaPTk specifically, ITK-SNAP is tightly integrated as a tool used for segmentation, accepting files chosen through the CaPTk interface and returning results for further use within CaPTk. ITK-SNAP uses a combination of random forests and level sets to obtain precise segmentations of structures [2]. Please see the following video for detailed instructions: https://www.youtube.com/watch?v=-gBcFxKf-7Q

--------

References

-# B.Gaonkar, L.Shu, G.Hermosillo, Y.Zhan, "Adaptive geodesic transform for segmentation of vertebrae on CT images", Proceedings Volume 9035, Medical Imaging 2014: Computer-Aided Diagnosis; 9035:16, 2014. DOI:10.1117/12.2043527
<br>
-# P.Yushkevich, Y.Gao, G.Gerig, "ITK-SNAP: An interactive tool for semi-automatic segmentation of multi-modality biomedical images", Conf Proc IEEE Eng Med Biol Soc. 2016:3342-3345, 2016. DOI:10.1109/EMBC.2016.7591443

--------
*/













/**
\page ht_FeatureExtraction Feature Extraction
<b>REQUIREMENTS:</b>
	-# An image or a set of co-registered images.
	-# An ROI file containing various labels, for which features will be extracted.
 
<b>USAGE:</b>
	-# Once image(s) and an ROI file are loaded, go to the "Feature Extraction" panel.
	-# In the "Customization" section, you can select one of the preset of features to extract from the drop-down menu:
		- <b>Custom</b>: allows the manual selection & customization of specific features.
		- <b>Lung_SBRT</b>: enables the extraction of features that are used in [1].
	-# For the "Custom" preset, and once specific features are selected, you can use the <b>Advanced</b> button (in "Customization") to parameterize further the individual selected features.
	-# In the <b>Image Selection</b> section, you can select the radio button of "<b>Selected Image</b>" or "<b>All Images</b>" to extract features for either the visualized image or all the images loaded in CaPTk, respectively.
	-# In the <b>Mask Selection</b> section, you have the option to define the label number(s) for which you want to extract features. Note that when more than one label number is entered the 'pipe' symbol should be used as a separator, i.e. |. Equivalently, text labels should be provided corresponding to each label number, again separated by a 'pipe'.
	-# Once the output CSV file is defined you can click on "<b>Compute + Save</b>". (Note that the CSV file should be in ASCII format)
	
	- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, and can run in the following format:
	\verbatim
	FeatureExtraction.exe -s "AAC0_timestamp" -p "path/T1,path/T2,path/mask" -m "T1/T2" -r "2,4,5" -l "ED,EN,NE" -f "GLCM,GLRM" -fGLCM "radius=4,angle=0::45:180"
	\endverbatim
	\verbatim
	FeatureExtraction.exe -i "file.csv" -m "T1/T2" -r "2,4,5" -l "ED,EN,NE" -fi "myparam.csv"
	\endverbatim
	
--------

References

-# H.Li, M.Galperin-Aizenberg, D.Pryma, C.Simone, Y.Fan, "Predicting treatment response and survival of early-stage non-small cell lung cancer patients treated with stereotactic body radiation therapy using unsupervised two-way clustering of radiomic features", Int. Workshop on Pulmonary Imaging, 2017.

--------

*/

/**
\page ht_SpecialApps Specialized Applications (SAs) Usage
Contains the following applications: 

- \subpage Glioblastoma_WhiteStripe "Brain Cancer: WhiteStripe"
- \subpage Glioblastoma_Atlas "Brain Cancer: Population Atlas"
- \subpage Glioblastoma_Confetti "Brain Cancer: Confetti"
- \subpage Glioblastoma_Recurrence "Brain Cancer: Glioblastoma Infiltration Index (Recurrence)"
- \subpage Glioblastoma_Survival "Brain Cancer: Glioblastoma Survival Prediction Index"
- \subpage Glioblastoma_PHI "Brain Cancer: Glioblastoma EGFRvIII Surrogate Index (PHI Estimator)"
- \subpage Glioblastoma_Molecular "Brain Cancer: Glioblastoma Molecular Subtype Prediction"
- \subpage BreastCancer_LIBRA "Breast Cancer: Breast Density Estimation (LIBRA)"
- \subpage LungCancer_SBRT "Lung Cancer: Radiomics Analysis of Lung Cancer (SBRT Lung)"
- \subpage Glioblastoma_Directionality "Miscellaneous: Directionality Estimator"
- \subpage Perfusion_Derivatives "Miscellaneous: Perfusion Derivatives"
- \subpage Diffusion_Derivatives "Miscellaneous: Diffusion Derivatives"
- \subpage PCA_Extraction "Miscellaneous: PCA Volume Extraction"

--------
*/



/**
\page Glioblastoma_WhiteStripe Brain Cancer: WhiteStripe
This algorithm normalizes conventional brain MRI scans [1] by detecting a latent subdistribution of normal tissue and linearly scaling the histogram of images.

<b>REQUIREMENTS:</b>
	- Bias-corrected (N3, or N4) T1-weighted or T2-weighted images, ideally either skull-stripped or rigidly aligned to MNI space.

<b>USAGE:</b>
	-# Launch the WhiteStripe UI using the 'Applications -> WhiteStripe' menu option.
	-# Specify the Input and Output files and different parameters (defaults are populated).
	-# Click on 'Run WhiteStripe" and the results can be seen in a slice format using "Toggle Mask/Image" checkbox.
	-# Use 'Level Display' when needed.
	- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	WhiteStripe.exe -i C:/inputImage.nii.gz -o C:/outputImage.nii.gz
	\endverbatim

	NOTE: WhiteStripe uses the KernelFit library from Lentner (https://github.com/glentner/KernelFit).

--------

References

-# R.T.Shinohara, E.M.Sweeney, J.Goldsmith, N.Shiee, F.J.Mateen, P.A.Calabresi, S.Jarso, D.L.Pham, D.S.Reich, C.M.Crainiceanu, Australian Imaging Biomarkers Lifestyle Flagship Study of Ageing, Alzheimer's Disease Neuroimaging Initiative. "Statistical normalization techniques for magnetic resonance imaging", Neuroimage Clin. 6:9-19, 2014. DOI:10.1016/j.nicl.2014.08.008

--------

*/
  
/**  
\page Glioblastoma_PHI Brain Cancer: Glioblastoma EGFRvIII Surrogate Index (PHI Estimator)
This application evaluates the Epidermal Growth Factor Receptor splice variant III (EGFRvIII) status in primary glioblastoma, by quantitative pattern analysis of the spatial heterogeneity of peritumoral perfusion dynamics from Dynamic Susceptibility Contrast (DSC) MRI scans, through the Peritumoral Heterogeneity Index (PHI / &phi;-index) [1-3].

<b>REQUIREMENTS:</b>
	-# T1-Gd: To annotate the immediate peritumoral ROI.
	-# T2-FLAIR: To annotate the distant peritumoral ROI.
	-# DSC-MRI: To perform the analysis and extract the PHI.

<b>USAGE:</b>
	-# Annotate 2 ROIs: one near (Label:1) the enhancing tumor and another far (Label:2) from it (but still within the peritumoral region). Rules for ROI annotation are provided below [3].
	-# Once the 2 ROIs are annotated, the application can be launched by using the menu option: 'Applications -> EGFRvIII Surrogate Index'.
	-# A pop-up window appears displaying the results (within <1 minute).
	- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	EGFRvIIISurrogateIndex.exe -i C:/inputImage.nii.gz -m C:/maskWithNearAndFarLabels.nii.gz
	\endverbatim

<b>Rules for ROI Annotation</b>
These two ROIs are used to sample tissue located on the two boundaries of the peritumoaral edema/invasion area: near to and far from the tumor, respectively, and hence to evaluate the heterogeneity or spatial gradient of perfusion signals [1-3].

The "near" ROI is initially defined in the T1-Gd volume, adjacent to the enhancing part of the tumor, described by hyperintense signal on T1-Gd. The T2-FLAIR volume is then used to revise this ROI in terms of all its voxels being within the peritumoral edematous tissue, described by hyperintense signal on the T2-FLAIR volume.

The T2-FLAIR volume is also used to define the ROI at the farthest from the tumor but still within the edematous tissue, i.e., the enhancing FLAIR abnormality signal.

These ROIs are described by lines drawn in multiple slices of each image (T1-Gd and T2-FLAIR) for each subject.

Please note that during annotation:
- both ROIs are always within the peritumoral edema/invasion area,
- none of the ROIs are in proximity to the ventricles,
- bothe ROIs are representative of infiltration into white matter and not into gray matter,
- the distant ROI is at the farthest possible distance from the enhancing part of the tumor while still within edema, and 
- no vessels are involved within any of the defined ROIs, as denoted in the T1-Gd volume.

--------

References

-# S.Bakas, H.Akbari, J.Pisapia, M.Rozycki, D.M.O'Rourke, C.Davatzikos. "Identification of Imaging Signatures of the Epidermal Growth Factor Receptor Variant III (EGFRvIII) in Glioblastoma", Neuro Oncol. 17(Suppl 5):v154, 2015. DOI:10.1093/neuonc/nov225.05
<br>
-# S.Bakas, Z.A.Binder, H.Akbari, M.Martinez-Lage, M.Rozycki, J.J.D.Morrissette, N.Dahmane, D.M.O'Rourke, C.Davatzikos, "Highly-expressed wild-type EGFR and EGFRvIII mutant glioblastomas have similar MRI signature, consistent with deep peritumoral infiltration", Neuro Oncol. 18(Suppl 6):vi125-vi126, 2016. DOI:10.1093/neuonc/now212.523
<br>
-# S.Bakas, H.Akbari, J.Pisapia, M.Martinez-Lage, M.Rozycki, S.Rathore, N.Dahmane, D.M.O'Rourke, C.Davatzikos, "In vivo detection of EGFRvIII in glioblastoma via perfusion magnetic resonance imaging signature consistent with deep peritumoral infiltration: the phi-index", Clin Cancer Res. 23(16):4724-4734, 2017. DOI:10.1158/1078-0432.CCR-16-1871

--------
*/

/**

\page Glioblastoma_Recurrence "Brain Cancer: Glioblastoma Infiltration Index (Recurrence)"
This application provides a probability map of deeply infiltrating tumor in the peritumoral edema/invasion region that largely agrees with subsequent recurrence in <i>de novo</i> glioblastoma patients, via multi-parametric MRI analysis, as shown in [1-3].

<b>REQUIREMENTS:</b>
-# Co-registered Multimodal MRI: T1, T1-Gd, T2, T2-FLAIR, DSC-MRI, DTI-AX, DTI-FA, DTI-RAD, DTI-TR. Ensure that these are the identified modalities in the drop-down menus next to each loaded image.
-# Segmentation labels of the tumor sub-regions in a single NIfTI (.nii.gz) file: Non-enhancing tumor core (Label=1), Enhancing tumor core (Label=4), Edema (Label=2)
-# The data for each patient should be organized in the following directory structure. 
  - SubjectID
    -# CONVENTIONAL 
      - "my_T1_file.nii.gz"
      - "my_T2_file.nii.gz"
      - "my_T1CE_file.nii.gz"
      - "my_FLAIR_file.nii.gz"
    -# DTI
      - "my_AX_file.nii.gz"
      - "my_FA_file.nii.gz"
      - "my_RAD_file.nii.gz"
      - "my_TR_file.nii.gz"
    -# PERFUSION
      - "my_PERFUSION_file.nii.gz"
    -# SEGMENTATION
      - "my_segmentation_file.nii.gz"
      - "my_near_region_file.nii.gz" (only for training a new model)
      - "my_far_region_file.nii.gz" (only for training a new model)
-# The data of multiple patients should be organized in the above mentioned structure and reside under the same folder, e.g.:
	- Data_of_multiple_patients
		-# Subject_ID1
		-# Subject_ID2
		-# ...
		-# Subject_IDn

<b>USAGE:</b>
- Infiltration prediction on loaded subject.
	-# Load the required images in CaPTk and correctly assign the modality label in the drop-down menu. 
	-# Load the segmentation labels of the tumor sub-regions from a single NIfTI (.nii.gz) file. The labels included in the file should represent the Non-enhancing tumor core (Label=1), Enhancing tumor core (Label=4), and Edema (Label=2).
	-# Select the "Model Directory". Note that a model trained on a cohort of HUP can be found in ftp://www.nitrc.org/home/groups/captk/downloads/models/recurrence.zip
	-# Select the "Output Directory" and click on "Confirm".
	-# The result is saved in the output folder and also loaded in the list of modalities (within ~2 minutes).

- Infiltration prediction on a batch of subjects.
	- "Train a new model": 
		-# Select the "Training Directory", e.g., Data_of_multiple_patients (confirm the data follows the structure instructed above).
		-# Select the "Output Directory" where the trained model should be saved.
		-# Click on 'Confirm'.
		-# A pop-up window will confirm the completion of model training (~1.5*NoOfSubjects minutes).
		-# This application is also available as with a stand-alone CLI for data analysts to build pipelines around.
  		\verbatim
		RecurrenceEstimator.exe -t 0 -i C:/RecurrenceSubjects -o C:/RecurrenceModel
		\endverbatim

	- "Use existing model": 
		-# Select the "Model Directory". Note that a model trained on a cohort of HUP can be found in ftp://www.nitrc.org/home/groups/captk/downloads/models/recurrence.zip
		-# Select the "Test Directory", e.g., Data_of_multiple_patients (confirm the data follows the structure instructed above).
		-# Select the "Output Directory", where the user wants to save the infiltration maps.
		-# Click on 'Confirm'.
		-# A pop-up window will confirm the completion of infiltration map calculations (~1.5*NoOfSubjects minutes).
		-# This application is also available as with a stand-alone CLI for data analysts to build pipelines around:
		\verbatim
		RecurrenceEstimator.exe -t 1 -i C:/RecurrenceSubjects -o C:/RecurrenceOutput -m C:/RecurrenceModel
		\endverbatim
		
--------

References

-# H.Akbari, L.Macyszyn, X.Da, R.L.Wolf, M.Bilello, R.Verma, D.M.O'Rourke, C.Davatzikos, "Pattern analysis of dynamic susceptibility contrast-enhanced MR imaging demonstrates peritumoral tissue heterogeneity", Radiology. 273(2):502-10, 2014. DOI:10.1148/radiol.14132458
<br>
-# H.Akbari, L.Macyszyn, J.Pisapia, X.Da, M.Attiah, Y.Bi, S.Pal, R.Davuluri, L.Roccograndi, N.Dahmane, R.Wolf, M.Bilello, D.M.O'Rourke, C.Davatzikos, "Survival Prediction in Glioblastoma Patients Using Multi-parametric MRI Biomarkers and Machine Learning Methods", American Society of Neuroradiology, O-525:2042-2044, 2015. (http://www.asnr.org/sites/default/files/proceedings/2015_Proceedings.pdf)
<br>
-# H.Akbari, L.Macyszyn, X.Da, M.Bilello, R.L.Wolf, M.Martinez-Lage, G.Biros, M.Alonso-Basanta, D.M.O'Rourke, C.Davatzikos. "Imaging Surrogates of Infiltration Obtained Via Multiparametric Imaging Pattern Analysis Predict Subsequent Location of Recurrence of Glioblastoma", Neurosurgery. 78(4):572-80, 2016. DOI:10.1227/NEU.0000000000001202

--------
*/
  
/**
\page Glioblastoma_Survival "Brain Cancer: Glioblastoma Survival Prediction Index"
This application provides the survival prediction index (SPI) of <i>de novo</i> glioblastoma patients by using baseline pre-operative multi-parametric MRI analysis [1].

A multivariate model trained on data from the Hospital of the University of Pennsylvania (as described in the study of [1]) is provided with the CaPTk. This can be found in [CaPTk_Installation_Folder]/data/survival. 

<b>REQUIREMENTS:</b>
-# Co-registered Multimodal MRI: T1, T1-Gd, T2, T2-FLAIR, DTI-AX, DTI-FA, DTI-RAD, DTI-TR, DSC-PH, DSC-PSR, DSC-rCBV.
-# Segmentation labels of the tumor sub-regions: Non-enhancing tumor core (Label=1), Enhancing tumor core (Label=4), Edema (Label=2)
-# Clinical data: A csv file having patient's demographics (Note that the CSV file should be in ASCII format). Should have age (in first column) and survival (in second column) for training a new model, and age only for survival prediction of new patients. 
-# The data for each patient should be organized in the following directory structure. 
  - Subject_ID
    -# features.csv file 
    -# CONVENTIONAL 
      - "my_T1_file.nii.gz"
      - "my_T2_file.nii.gz"
      - "my_T1CE_file.nii.gz"
      - "my_FLAIR_file.nii.gz"
    -# DTI
      - "my_AX_file.nii.gz"
      - "my_FA_file.nii.gz"
      - "my_RAD_file.nii.gz"
      - "my_TR_file.nii.gz"
    -# PERFUSION
      - "my_rCBV_file.nii.gz"
      - "my_PSR_file.nii.gz"
      - "my_PH_file.nii.gz"
    -# SEGMENTATION
      - "original_segmentation_file.nii.gz"
      - "segmentation_file_in_atlas_space.nii.gz"
-# The data of multiple patients should be organized in the above mentioned structure and reside under the same folder, e.g.:
	- Data_of_multiple_patients
		-# Subject_ID1
		-# Subject_ID2
		-# ...
		-# Subject_IDn
      
<b>USAGE:</b>
- Train New Model: 
	-# "Select Subjects". Select the input directory (e.g., Data_of_multiple_patients) that follows the folder structure described above.
	-# "Output". Select the folder where the trained model will be saved.
	-# A pop-up window appears displaying the completion of model building (time depends on the number of patients: ~2*patients minutes).
	-# This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	SurvivalPredictor.exe -t 0 -i C:/SurvivalInput -o C:/SurvivalModel
	\endverbatim

- Use Existing Model
	-# "Model Directory". Choose the directory of a saved model.
	-# "Test Subjects". Select the input directory (e.g., Data_of_multiple_patients) that follows the folder structure described above.
	-# "Output". Select the output directory where a .csv file with the SPI for all patients will be saved, and click on 'Confirm'.
	-# A pop-up window appears displaying the completion of SPI calculation. The window will also show the SPI index of the first subject in the Data_of_multiple_patients folder (runtime depends on the number of patients: ~2*patients minutes).
	-# This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	SurvivalPredictor.exe -t 1 -i C:/SurvivalInput -m C:/SurvivalModel -o C:/SurvivalOutput
	\endverbatim
	
--------

References

-# L.Macyszyn, H.Akbari, J.M.Pisapia, X.Da, M.Attiah, V.Pigrish, Y.Bi, S.Pal, R.V.Davuluri, L.Roccograndi, N.Dahmane. M.Martinez-Lage, G.Biros, R.L.Wolf, M.Bilello, D.M.O'Rourke, C.Davatzikos. "Imaging patterns predict patient survival and molecular subtype in glioblastoma via machine learning techniques", Neuro Oncol. 18(3):417-25, 2016. DOI:10.1093/neuonc/nov127

--------
*/

/**
\page Glioblastoma_Molecular "Brain Cancer: Glioblastoma Molecular Subtype Prediction"
This application provides the prediction of the molecular subtype of <i>de novo</i> glioblastoma patients using baseline pre-operative multi-parametric MRI analysis [1].

A multivariate model trained on data from the Hospital of the University of Pennsylvania (as described in [1]) is provided with the CaPTk. This can be found in [CaPTk_Installation_Folder]/data/molecular. 

<b>REQUIREMENTS:</b>
-# Co-registered Multimodal MRI: T1, T1-Gd, T2, T2-FLAIR, DTI-AX, DTI-FA, DTI-RAD, DTI-TR, DSC-PH, DSC-PSR, DSC-rCBV. 
-# Segmentation labels of the tumor sub-regions: Non-enhancing tumor core (Label=1), Enhancing tumor core (Label=4), Edema (Label=2)
-# Clinical data: A csv file having patient's demographics (Note that the CSV file should be in ASCII format). Should have age (in first column) and molecular subtype (in second column) for training a new model, and age only for molecular subtype prediction of new patients. 
-# The data for each patient should be organized in the following directory structure. 
  - Subject_ID
    -# features.csv file 
    -# CONVENTIONAL 
      - "my_T1_file.nii.gz"
      - "my_T2_file.nii.gz"
      - "my_T1CE_file.nii.gz"
      - "my_FLAIR_file.nii.gz"
    -# DTI
      - "my_AX_file.nii.gz"
      - "my_FA_file.nii.gz"
      - "my_RAD_file.nii.gz"
      - "my_TR_file.nii.gz"
    -# PERFUSION
      - "my_rCBV_file.nii.gz"
      - "my_PSR_file.nii.gz"
      - "my_PH_file.nii.gz"
    -# SEGMENTATION
      - "original_segmentation_file.nii.gz"
      - "segmentation_file_in_atlas_space.nii.gz"
-# The data of multiple patients should be organized in the above mentioned structure and reside under the same folder, e.g.:
	- Data_of_multiple_patients
		-# Subject_ID1
		-# Subject_ID2
		-# ...
		-# Subject_IDn
      
<b>USAGE:</b>
- Train New Model: 
	-# "Select Subjects". Select the input directory (e.g., Data_of_multiple_patients) that follows the folder structure described above.
	-# "Output". Select the folder where the trained model will be saved.
	-# A pop-up window appears displaying the completion of model building. (Time depends on the number of patients: ~2*Patients minutes).
	-# This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	MolecularSubtypePredictor.exe -t 0 -i C:/MolecularSubtypeInput -o C:/MolecularSubtypeModel
	\endverbatim

- Use Existing Model
	-# "Model Directory". Choose the directory of a saved model.
	-# "Test Subjects". Select the input directory (e.g., Data_of_multiple_patients) that follows the folder structure described above.
	-# "Output". Select the output directory where a .csv file with the predicted molecular subtypes for all patients will be saved, and click on 'Confirm'.
	-# A pop-up window appears displaying the completion of subtype calculation. The window will also show the molecular subtype of the first subject in the Data_of_multiple_patients folder (runtime depends on the number of patients: ~2*patients minutes).
	
	-# This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	MolecularSubtypePredictor.exe -t 1 -i C:/MolecularSubtypeInput -m C:/MolecularSubtypeModel -o C:/MolecularSubtypeOutput
	\endverbatim
	
--------

References

-# L.Macyszyn, H.Akbari, J.M.Pisapia, X.Da, M.Attiah, V.Pigrish, Y.Bi, S.Pal, R.V.Davuluri, L.Roccograndi, N.Dahmane. M.Martinez-Lage, G.Biros, R.L.Wolf, M.Bilello, D.M.O'Rourke, C.Davatzikos. "Imaging patterns predict patient survival and molecular subtype in glioblastoma via machine learning techniques", Neuro Oncol. 18(3):417-25, 2016. DOI:10.1093/neuonc/nov127.

--------
*/
  
/**
\page Glioblastoma_Atlas "Brain Cancer: Population Atlases"
This application facilitates the users to generate population atlases for patients with different tumor subgroups [1] to emphasize their heterogeneity.

<b>REQUIREMENTS:</b>
-# Segmentation labels of the tumor sub-regions: Non-enhancing tumor core (Label=1), Enhancing tumor core (Label=4)
-# Groups: A csv file having patient's label file name e.g. SegmentationLabel.nii.gz (in first column) and group (in second column). (Note that the CSV file should be in ASCII format)
-# Standard atlas: A standard atlas to map all the patients in a unified space. 

-# The data (segmentation label files) of multiple patients should reside under the same folder, e.g.:
	- Data_of_multiple_patients
		-# Subject_ID1.nii.gz
		-# Subject_ID2.nii.gz
		-# ...
		-# Subject_IDn.nii.gz
      
<b>USAGE:</b>
	-# Launch the Population Atlases application using the 'Applications -> PopulationAtlas' menu option.
	-# Specify the Input (e.g., Data_of_multiple_patients) and Output directories, groups and atlas files.
	-# Click on 'Run PopulationAtlas" and the atlases will be displayed in the visualization window. 
	
	-# This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	PopulationAtlases.exe -i C:/PopulationAtlasesInput -l C:/GroupFile -a C:/AtlasFile -o C:/populationAtlasesOutput
	\endverbatim
	
--------

References

-# M. Bilello, H. Akbari, X. Da, J.M.Pisapia, S.Mohan, R.L.Wolf, D.M.O'Rourke, M.Martinez-Lage, C.Davatzikos. "Population-based MRI atlases of spatial distribution are specific to patient and tumor characteristics in glioblastoma", Neuroimage Clin. 12:34-40, 2016. DOI:10.1016/j.nicl.2016.03.007

--------
*/

/**
\page Glioblastoma_Confetti "Brain Cancer: Confetti"
This is a method for automated extraction of white matter tracts of interest in a consistent and comparable manner over a large group of subjects without drawing the inclusion and exclusion ROIs, facilitating an easy correspondence between different subjects, as well as providing a representation that is robust to edema, mass effect, and tract infiltration [1-3]. Confetti includes three main steps: 
-# Connectivity signature generation for fibers
-# Clustering of fibers using a mixture of multinomials (MNs) clustering method and Expectation-Maximization (EM) optimization framework
-# Extraction of predefined white matter tracts. 

<b>REQUIREMENTS:</b>
	-# Fiber set (Streamline) to be clustered: The fiber set can be generated using any tractography model, but the file should be saved in .Bfloat format (i.e. fiber format of Camino package). Different converters can be be used to convert .trk to .Bfloat and vice-versa.
	-# Track Density Images (TDI): When using GUI, it needs to be generated in the manner explained below; this constraint is not present when using Confetti via the command line.
	-# Parcellation of the brain into 87 Desikan/Freesurfer gray matter (GM) regions [4]

	<b>Generation of TDI Images with GUI:</b>
	-# Freesurfer [4] is used with the Desikan atlas [5] to define 87 gray matter ROIs in the user diffusion space. 
	-# Region IDs of the ROIs as used by Freesurfer is provided in the example file "{CaPTk_Sample_Data}/Confetti/input/freesurfer_ROIs.csv". (Note that the CSV file should be in ASCII format)
	-# TDIs must be generated using the probtrackx utility of FSL package [6] with its default parameters and 5000 seeds per voxel. 
	-# Each TDI image is a whole brain voxel-map, with each voxel having the number of fibers passing through this voxel and reaching to one of the 87 gray matter ROIs defined by Freesurfer. 
	-# In total, you should have 87 TDI, each corresponding to one ROI. 

<b>USAGE:</b>
	-# Open Confetti UI using the 'Applications -> Confetti' menu option.
	-# Load the required images using "Streamline File" and "TDI Directory".
	-# Specify the output directory and click on 'Run Confetti'.
	-# Visually review the output tracks by double clicking respective fields on the populated list view.
	- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example commands:
	-# Generation of connectivity signatures of the fibers that will be clustered into bundles:<br>
	\verbatim
	Confetti signature -i tdi_paths_freesurfer_87ROIs.csv -f fibers.Bfloat -o signatures.csv
	\endverbatim
	-# Clustering of the generated fibers into bundles:<br>
	\verbatim
	Confetti cluster -s signatures.csv -k 200 -o clusterIDs.csv
	\endverbatim
	-# Identification of specific tracts (requires an annotated example):<br>
	\verbatim
	Confetti extract -t template/ -f fibers.Bfloat -c clusterIDs.csv -o tracts_
	\endverbatim

--------

References

-# B.Tunc, M.Ingalhalikar, W.A.Parker, J.Lecoeur, N.Singh, R.L.Wolf, L.Macyszyn, S.Brem, R.Verma, "Individualized Map of White Matter Pathways: Connectivity-based Paradigm for Neurosurgical Planning", Neurosurgery. 79(4):568-77, 2016. DOI:10.1227/NEU.0000000000001183.
<br>
-# B.Tunc, W.A.Parker, M.Ingalhalikar, R.Verma, "Automated tract extraction via atlas based Adaptive Clustering", NeuroImage. 102(2):596-607, 2014. DOI:10.1016/j.neuroimage.2014.08.021
<br>
-# B.Tunc, A.R.Smith, D.Wasserman, X.Pennec, W.M.Wells, R.Verma, K.M.Pohl, "Multinomial Probabilistic Fiber Representation for Connectivity Driven Clustering", Inf Process Med Imaging. 23:730-41, 2013.
<br>
-# B.Fischl, M.I.Sereno, A.M.Dale, "Cortical surface-based analysis. II: Inflation, flattening, and a surface-based coordinate system", NeuroImage. 9:195-207, 1999. DOI:10.1006/nimg.1998.0396 
<br>
-# R.S.Desikan, F.Segonne, B.Fischl, B.Quinn, B.Dickerson, D.Blacker, R.Buckner, A.Dale, R.Maguire, B.Hyman, M.Albert, R.Killiany, "An automated labeling system for subdividing the human cerebral cortex on MRI scans into gyral based regions of interest", NeuroImage. 31(3):968-80, 2006. DOI:10.1016/j.neuroimage.2006.01.021
<br>
-# M.Jenkinson, C.F.Beckmann, T.E.J.Behrens, M.W.Woolrich, S.M.Smith, "FSL", Neuroimage. 62(2):782-790, 2012. DOI:10.1016/j.neuroimage.2011.09.015

--------
*/


/**
\page Glioblastoma_Directionality "Brain Cancer: Directionality Estimator"
This application estimates the volumetric changes and their directionality for a given ROI across two timepoints [1] and also returns the projections of the boundary point with the maximum distance from a seedpoint (with label <b>TU</b>) in each of the 3 2D visualized planes. 
	
<b> REQUIREMENTS:</b>
	-# The image of timepoint 1 and a tissue seedpoint with label <b>TU</b> within the ROI at timepoint 1.
	-# Two ROI files, one for each timepoint (note that the populated voxels of the ROIs should be of Label 1).

<b> USAGE:</b>
	-# Load the image of timepoint 1 in CaPTk and initialize the (or load an already initialized) seedpoint with label TU defining the point within the ROI from where you want to estimate the expansion. 
	-# Launch the Directionality Estimator application using the 'Applications -> Directionality Estimator' menu option.
	-# Specify the Input ROI files for the 2 timepoints and the Output directory where the output masks and text files will be saved.
	-# Click on 'Confirm" and a pop-up window will be displayed showing the total volumetric change, as well as the change per 3D octant. 
	-# A parametric map is automatically loaded as an image in the visualization panels of CaPTk dividing the ROI of timepoint 1 in octants and assigning a value in the range [0,1] on each octant. Smaller and larger values represent the octants with smaller and larger relative volumetric change.
	-# A multi-label map is also automatically loaded as an ROI in the visualization panels of CaPTk depicting with i) label 1 (red) and label 3 (yellow) the intersection of the timepoint 1 and timepoint 2 ROIs, ii) label 3 (yellow) the octant of maximum expansion, and iii) label 2 (green) the voxels of expansion in timepoint 2, i.e. the voxels that did not exist in the timepoint 1 ROI but only in the ROI of timepoint 2. Note that the visualization of the multi-label map can be controlled from the "Drawing" panel.
	-# Tissue point table gets updated with 3 points marked "CSF" (which are correspond to the direction of max point along the different planes) and 1 point marked "RTN" (which is the actual 3D point of max distance from initialized seed point).
	-# The results as well as the actual distances are automatically saved in a text file in the Output folder together with the multi-label ROI images.
	-# The user can save both the actual and the projection points of max distance in a location of their choosing.

	- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	DirectionalityEstimate.exe -l C:/labelMap.nii.gz -o C:/output.txt -i 40,25,60
	\endverbatim
	
<b> OUTPUT:</b>
The following files are saved in the output folder:
- <b>directionalityOutput.txt</b>, which includes the total volumetric change and the change per 3D octant (as shown in the output window), as well as the coordinates of the point of the largest distance (i.e., RTN) from the TU seedpoint together with its projections in the 3 2D planes (i.e., CSF). 
- <b>roi_DE_octantImage.nii.gz</b>, which describes the partitioned version of timepoint_2_ROI in octants with the corresponding numbering of octants accompanying the numbering included in the output text file. 
- <b>roi_DE_visualizationRatio.nii.gz</b>, which describes the ratio of the timepoint_2_ROI over timepoint_1_ROI of the volumetric differences per octant.
- <b>roiDE_visualizationProbability.nii.gz</b>, which describes the parametric map dividing the ROI of timepoint 1 in octants and assigning a value in the range [0,1] on each octant. Smaller and larger values represent the octants with smaller and larger relative volumetric change. This is the same result as roi_DE_visualizationRatio.nii.gz but scaled between 0 and 1.
- <b>roi_DE_visualizationIncrease.nii.gz</b>, which describes the multi-label map depicting with i) label 1 (red) and label 3 (yellow) the intersection of the timepoint 1 and timepoint 2 ROIs, ii) label 3 (yellow) the octant of maximum expansion based on distance and not based on volumetric difference, and iii) label 2 (green) the voxels of expansion in timepoint 2, i.e. the voxels that did not exist in the timepoint 1 ROI but only in the ROI of timepoint 2. Note that the visualization of the multi-label map can be controlled from the "Drawing" panel.

--------

Reference

-# M.E.Schweitzer, M.A.Stavarache, N.Petersen, S.Bakas, A.J.Tsiouris, C.Davatzikos, M.G.Kaplitt, M.M.Souweidane, "Modulation of Convection Enhanced Delivery (CED) distribution using Focused Ultrasound (FUS)", Neuro Oncol. 19(Suppl 6):vi272, 2017. DOI:10.1093/neuonc/nox168.1118

--------
*/


/**
\page BreastCancer_LIBRA "Breast Cancer: Breast Density Estimation (LIBRA)"
The Laboratory for Individualized Breast Radiodensity Assessment (LIBRA) is a software application for fully-automated breast density segmentation in full-field digital mammography (FFDM) [1]. LIBRA is available in single and batch mode. 

<b>REQUIREMENTS:</b>
	- Raw (i.e., "FOR PROCESSING") or vendor post-processed (i.e., "FOR PRESENTATION") FFDM images.
	- FFDM vendors currently supported: GE Healthcare and Hologic.
	- For single mode: Each image stored in a separate folder.
	- For batch mode: All images stored in a single folder.
	
<b>USAGE:</b>
- Single mode:
	-# Load the FFDM image using the 'File -> Load -> Images' menu option.
	-# Launch LIBRA using the 'Applications -> LIBRA_SingleImage' menu option.
	-# LIBRA is executed and the segmentation mask is automatically loaded back to CaPTk. 
	-# LIBRA outputs (described in the Outputs section below) are automatically saved in a temp folder under the CaPTk directory.
- Batch mode:
	-# Launch LIBRA using the 'Applications -> LIBRA_BatchMode' menu option.
	-# The user is prompted to select the folder which contains the images for analysis.
	-# The user is then prompted to select an output folder where the density scores and density segmentation images .jpg files will be stored. Note: If the folder already exists and contains density estimates (e.g., from a previous run of LIBRA), it will append the new results to the results file.
	-# Lastly, the user will be asked whether they wish to store a processing log file and intermediate graphics in addition to the density segmentation outline which may be on interest for publication or visualization purposes, and are further described in the Outputs section below.
	-# LIBRA will then begin processing all the FFDM images; the progress of the software can be monitored via the related command-prompt window that opens when LIBRA starts running. When analysis is complete, a prompt appears asking the user if they want to open the results folder and if they want to perform additional analyses.

<b>OUTPUT:</b>
- The following outputs are always generated:
	- Masks_<Image-Analyzed>.mat: A MATLAB datafile containing a structure array that stores the breast area (res.BreastArea), dense area (res.DenseArea), and area percent density estimates (res.PD_SVM) for the FFDM analyzed (res.dcm_fname). This structure array also stores the binary masks of the breast (res.BreastMask) and dense tissue segmentations (res.DenseMask), which may be useful for further processing and analysis.
	- Density.csv: A comma separated file (open-able by spreadsheet programs like Excel) that stores the breast area, dense area, and percent density estimates for each FFDM image analyzed, listed by file name. The Manufacturer, Laterality and View-Position of the mammogram are also provided for reference. (Note that the CSV file should be in ASCII format)
	- <Image-Analyzed-Filename>_density_segmentation.jpg: In the Result_Images sub-directory, the breast and density segmentation results are provided for each image analyzed. The breast is outlined in red, the density segmentation is in green. Note that for visualization purposes, the image is window-leveled to between the 5th and 95th percentile of the intensity values of the pixels within the breast region.
- In single mode the following outputs are generated by default, while in batch mode they are only generated if the user specifies to save intermediate files:
	- LIBRA-logfile_<time-stamp>.txt: A log of the programs outputs during the session, this text file is time-stamped at the start of the LIBRA sessions so that multiple sessions writing to the same output folder each have their own unique log of events. The <time-stamp> takes the form of <Month>-<DD>-<YYYY>_HH-MM-SS, in 24-hour format. .. _fig_log_file.
	- <Image-Analyzed-Filename>_Windowed_Original.jpg: In the Result_Images sub-directory, the analyzed image window-leveled to between the 5th and 95th percentile of the intensity values of the pixels within the breast region is also provided with out the breast density segmentation overlay for comparison purposes.
	- <Image-Analyzed>_density_imagesc.jpg: In the Result_Images sub-directory, the image clusters (grouped by colors) generated by the Fuzzy C-Means stage of the LIBRA algorithm is provided.
	- <Image-Analyzed>_intensity_histogram.jpg: In the Result_Images sub-directory, the breast intensity histogram (z-scored) and FCM-cluster centers are plotted in this image.

Please see the LIBRA manual for more details: http://www.med.upenn.edu/sbia/libra.html

	- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example command:
	\verbatim
	LIBRA.exe --input C:/inputDICOMDir --output C:/outputDir
	\endverbatim

--------

References

-# B.M.Keller, D.L.Nathan, Y.Wang, Y.Zheng, J.C.Gee, E.F.Conant, D.Kontos, "Estimation of breast percent density in raw and processed full field digital mammography images via adaptive fuzzy c-means clustering and support vector machine segmentation", Med Phys. 39(8):4903-4917, 2012. DOI:10.1118/1.4736530

--------
*/

/**
\page LungCancer_SBRT "Lung Cancer: Radiomics Analysis of Lung Cancer (SBRT Lung)"
This application provides a fully automatic segmentation of lung nodules [1].

<b>REQUIREMENTS:</b>
	-# CT image
	-# PET image (co-registered to the CT image)

<b>USAGE:</b>
	-# Load the co-registered CT and PET images.
	-# Launch the segmentation step using the 'Applications -> <b>SBRT Segment</b>' menu option.
	-# The mask (Label:2) is automatically created.
	
- This application is also available as with a stand-alone CLI for data analysts to build pipelines around, using the following example commands:
\verbatim
SBRT_Lung_Segment.exe -d C:/dataDir -o C:/output
\endverbatim

--------

References

-# H.Li, M.Galperin-Aizenberg, D.Pryma, C.Simone, Y.Fan, "Predicting treatment response and survival of early-stage non-small cell lung cancer patients treated with stereotactic body radiation therapy using unsupervised two-way clustering of radiomic features", Int. Workshop on Pulmonary Imaging, 2017.

--------
*/

/**
\page Perfusion_Derivatives "Miscellaneous: Perfusion Derivatives"
This application extracts various measurements from a Dynamic-Susceptibility Contrast-enhanced (DSC) MRI scan. The exact measurements comprise i) an automatically-extracted proxy to relative Cerebral Blood Volume (ap-rCBV), ii) peak height (PH), iii) percent signal recovery (PSR). Note that the ap-rCBV measurement is not expected to be identical to the clinically extracted rCBV measurement.

<b> REQUIREMENTS:</b>
A single DSC-MRI scan.

<b> USAGE:</b>
	-# Launch the application from "Applications" -> "Perfusion derivatives".
	-# Specify the input DSC-MRI image, the perfusion measurements (i.e., ap-rCBV, PH, PSR) to be extracted, the "Echo Time" of the loaded scan in seconds (45 milliseconds = 0.045 seconds), and the output directory.
	-# Press "Confirm" button.
	-# The extracted measurements will be saved at the specified location (~5 minutes).

--------
*/

/**
\page Diffusion_Derivatives "Miscellaneous: Diffusion Derivatives"
This application extracts various measurements from a Diffusion Weighted MRI scan. The exact measurements comprise i) axial diffusivity (AX), ii) radial diffusivity (RAD), iii) trace (TR), and iv) fractional anisotropy (FA).

<b> REQUIREMENTS:</b>
A single DW-MRI image, its accompanying bvec and bval files, and a mask for which the measurements will be extracted.

<b> USAGE:</b>
	-# Launch the application from "Applications" -> "Diffusion derivatives".
	-# Specify the paths to the input DW-MRI image, bval and bvec files with the gradient information, and the mask defining the voxels to extract the measurements.
	-# Identify the diffusion measurements to be extracted, and the output directory.
	-# Press the "Confirm" button.
	-# The extracted measurements will be saved at the specified location (~5 minutes).

--------
*/

/**
\page PCA_Extraction "Miscellaneous: PCA Volume Extraction"
This application extracts the principal components from DSC-MRI scans as mentioned in [1].

<b> REQUIREMENTS:</b>
A single DSC-MRI image and a mask for which the measurements will be extracted.

<b> USAGE:</b>
	-# Load a DSC-MRI in CaPTk and the mask (Label:1) defining the voxels to extract the measurements.
	-# Launch the application from "Applications" -> "PCA".
	-# Specify the number of principal components required and the output directory.
	-# Press "Confirm" button. 
	-# The principal components will be extracted at the specified location and also loaded in CaPTk (~5 minutes).

--------

References

-# H.Akbari, L.Macyszyn, X.Da, R.L.Wolf, M.Bilello, R.Verma, D.M.O'Rourke, C.Davatzikos, "Pattern analysis of dynamic susceptibility contrast-enhanced MR imaging demonstrates peritumoral tissue heterogeneity", Radiology. 273(2):502-10, 2014. DOI:10.1148/radiol.14132458

--------
*/